
$(document).ready(function() {
  
  if($("#user_account_attributes_address_verification").val()){
    $("#verify_address_trigger").hide();         
  } 
  
  $(".verify_address_input").change(function(){  
    var first_name = $("#user_account_attributes_first_name").val();
    var last_name = $("#user_account_attributes_last_name").val();  
    var address1 = $("#user_account_attributes_address1").val();    
    var address2 = $("#user_account_attributes_address2").val();      
    var city = $("#user_account_attributes_city").val();      
    var state = $("#user_account_attributes_state").val();      
    var zip_code = $("#user_account_attributes_zipcode").val();
    var path = $("#verify_address_trigger").attr("data-url");
    var url = path +  "?first_name=" + first_name +
                      "&last_name="  + last_name +
                      "&address1="   + address1 +                                                
                      "&address2="   + address2 +                                                                                                
                      "&city="       + city +                                                                                                                                                
                      "&state="      + state +
                      "&zip_code="   + zip_code ;
    $("#verify_address_trigger").attr("href", url); 
    $("#verify_address_text").text('Unverified');            
    $("#user_account_attributes_address_verification").val('');      
    $("#verify_address_text").addClass('tc-r'); 
    $("#verify_address_text").removeClass('tc-y tc-g');
    $("#verify_address_trigger").show();    
  });
  
  $(".verify_address_input").bind('keypress', function(event){
    var pressed = String.fromCharCode(event.which);
    var allowed = /^[\w\d\s#.]+$/;     
    if(pressed.match(allowed)) {
      return true;
    }
    return false;
  });
  
});



/*$("#verify_address_trigger").click(function(){  
  var first_name = $("#user_acccount_attributes_first_name").val();
  var last_name = $("#user_acccount_attributes_last_name").val();  
  var address1 = $("#user_acccount_attributes_address1").val();    
  var address2 = $("#user_acccount_attributes_address2").val();      
  var city = $("#user_acccount_attributes_city").val();      
  var state = $("#user_acccount_attributes_state").val();      
  var zip_code = $("#user_acccount_attributes_zipcode").val();
  var path = $("#verify_address_trigger").attr("data-url");
  var url = path +  "?first_name=" + first_name +
                    "&last_name="  + last_name +
                    "&address1="   + address1 +                                                
                    "&address2="   + address2 +                                                                                                
                    "&city="       + city +                                                                                                                                                
                    "&state="      + state +
                    "&zip_code="   + zip_code ;
  alert(url);
  $("#result").html(ajax_load);  
  $.getScript(url, function(){  
      $("#result").html("test running");  
  });
});*/