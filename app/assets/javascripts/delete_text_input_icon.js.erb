$(document).ready(function() {

  // wrap all inputs with class .deletable with x to clear
  $('input.deletable').wrap('<span class="deleteicon" />').after($('<span/>').click(function() {
    $(this).prev('input').val('').focus();
    $(this).prev('input').trigger('change');
    $(this).hide();
  }));

   // on page load hide X for blank values
   $('span.deleteicon').each(function(event){
     if($(this).children('input.deletable').val() == ""){
       $(this).children('span').hide(); 
     }
   });

   
  $('input.deletable').keyup(function(){
    if($(this).val() != ""){
      $(this).next('span').show();
    }
    else {
      $(this).next('span').hide();
    }    
  });

  $('input.deletable').change(function(){
    if($(this).val() != ""){
      $(this).next('span').show();
    }
    else {
      $(this).next('span').hide();
    }
  });

});
