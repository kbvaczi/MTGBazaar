<% title "#{@transaction.transaction_number}" %>

<h1>Transaction <%= @transaction.transaction_number %></h1>

<div class="ma">
  
  <h2>Details</h2>
  <div><%= "Buyer: #{@transaction.buyer.username}" %></div>  
  <div class="mb-s"><%= "Seller: #{@transaction.seller.username}" %></div>    
  <div class="mb-s"><%= "Status: #{@transaction.status.capitalize}" %></div>
  <div><%= "Buyer Confirmed on: #{@transaction.buyer_confirmed_at.strftime("%d-%b-%Y")}" if @transaction.buyer_confirmed_at.present? %> </div>
  <div><%= "Seller Confirmed on: #{@transaction.seller_confirmed_at.strftime("%d-%b-%Y")}" if @transaction.seller_confirmed_at.present? %> </div>  
  <div><%= "Rejected on: #{@transaction.seller_rejected_at.strftime("%d-%b-%Y")}" if @transaction.seller_rejected_at.present? %> </div>
  <div><%= "Shipped on: #{@transaction.seller_shipped_at.strftime("%d-%b-%Y")}" if @transaction.seller_shipped_at.present? %>  </div>
  <div class="mb-s"><%= "Delivered on: #{@transaction.seller_delivered_at.strftime("%d-%b-%Y")}" if @transaction.seller_delivered_at.present? %> </div>
  <div><%= "Total Value: #{ number_to_currency(@transaction.total_value) }" %></div>

  <h2> <%= pluralize @transaction.item_count, "Item", "Items" %> </h2>
	
	<table class="data">
	  <tr class="header_row">
	  <th>Name</th>
	  <th>Set</th>      
	  <th>Price</th>
		<th>Cond.</th>
		<th>Lang.</th>
		<th>Options</th>
		<th>Qty.</th>
		
	</tr>
	
  <%= render :partial => "mtg/transaction_items/teaser", :collection => @items, :as => "item" %>  
  
	</table>

  <div class="left">
    <%= paginate @items, :collection => @items %>
  </div>
  <br/>
</div>