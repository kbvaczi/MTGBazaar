<% title "#{display_name(@mtg_card.name)}" #title is first 30 characters in card name %>

<h1><%= display_name(@mtg_card.name) %></h1>
<div class="content">
  <div class="card_info_wrapper group">
    <div class="card_image_wrapper">
      <%= image_tag(@mtg_card.image_path, :class => "mtg_card_image") %>
    </div>
    <!-- SET -->
    <div class="card_show_info">
      <div class="card_show_info_row">
        <div class="card_show_info_label">
          Set:
        </div>
        <div class="card_show_info_value">
          <%= display_name(@mtg_card.set.name) %>
        </div>   
      </div>
    <!-- COST -->    
      <div class="card_show_info_row">
        <div class="card_show_info_label">
          Cost:
        </div>
        <div class="card_show_info_value">
          <%= display_symbols(@mtg_card.mana_string) %>
        </div>      
      </div>
    <!-- COLOR -->    
      <div class="card_show_info_row">
        <div class="card_show_info_label">
          Color:
        </div>
        <div class="card_show_info_value">
          <%= display_color(@mtg_card.mana_color) %>
        </div>      
      </div>
    <!-- COLOR -->    
      <div class="card_show_info_row">
        <div class="card_show_info_label">
          Type:
        </div>
        <div class="card_show_info_value">
          <%= "#{@mtg_card.card_type}" %>
          <%= "- #{@mtg_card.card_subtype}" if not @mtg_card.card_subtype.empty? %>
        </div>      
      </div>    
    <!-- TEXT -->        
      <div class="card_show_info_row">
        <div class="card_show_info_label">
          Text:
        </div>
        <div class="card_show_info_value">
          <p><%= display_symbols(@mtg_card.description) %></p>
        </div>      
      </div>    
      <!-- RARITY -->        
        <div class="card_show_info_row">
          <div class="card_show_info_label">
            Rarity:
          </div>
          <div class="card_show_info_value">
            <%= display_rarity(@mtg_card.rarity) %>
          </div>      
        </div>
        <!-- RARITY -->        
          <div class="card_show_info_row">
            <div class="card_show_info_label">
              Artist:
            </div>
            <div class="card_show_info_value">
              <%= @mtg_card.artist %>
            </div>      
          </div>      
    </div>
  </div> <!-- card_info_wrapper -->
  <%= link_to "Sell this card", new_mtg_listing_path(:card_id => @mtg_card.id), :class => "right"%>

  <h2>Listings</h2>
  <% unless @listings.empty? %>
    <table style="width:100%;">
      <tr style="text-align:left;">
      	<th>Price</th><th>Seller</th><th>Condition</th><th>Language</th><th>Foil</th><th>Defects</th><th>Actions</th>
      </tr>
      <% @listings.each do |listing| %>
        <tr>
            <td>
              <%= number_to_currency(listing.price) %>
            </td>
            <td>
              <%= "#{listing.seller.username} (#{listing.seller.account.average_rating})" %>
            </td>
            <td>
              <%= display_condition(listing.condition) %>
            </td>
            <td>
              <%= capitalize_first_word(listing.language) %>
            </td>    
            <td>
              <%= listing.foil %>
            </td>    
            <td>
              <%= listing.defect %>
            </td>
            <td>
              <%= link_to "Add to Cart", add_to_cart_mtg_listings_path(listing.id), :method => :post %>
            </td>          
        </tr>
      <% end %>
    </table>  
  <% else %>
    <%= "There are currently no listings for this card." %>
    <%= link_to "List this card", new_mtg_listing_path(:card_id => @mtg_card.id) %>
  <% end %>     

</div> <!-- content -->
